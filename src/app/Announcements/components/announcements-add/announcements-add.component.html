<form [formGroup]="announcementForm" (ngSubmit)="onSubmit()"
  class="scalable-gap-24-16 scalable-p-16-8 cardBackground d-flex flex-column">
  <!-- Back Arrow -->
  <div class="d-flex gap-2 align-items-center">
    <img src="assets/images/svg/Back-Icon.svg" class="cursor-pointer" height="30" width="30" (click)="goBack()" />
    <h2 class="font-18 medium black mb-0">Add Announcement</h2>
  </div>

  <!-- Form Inputs -->
  <div class="row g-4">

    <!-- Title -->
    <div class="col-md-6">
      <div class="d-flex flex-column gap-1 w-100">
        <h4 class="mb-0 font-14 regular subTextColor">
          Title <span class="text-danger">*</span>
        </h4>
        <input type="text" formControlName="title" class="input-field" placeholder="Enter Title"
          [readonly]="isReadOnly" />

        <!-- Frontend validation messages -->
        <div *ngIf="announcementForm.get('title')?.touched && announcementForm.get('title')?.invalid"
          class="text-danger mt-1">
          <div *ngIf="announcementForm.get('title')?.errors?.['required']">
            Title is required.
          </div>
          <div *ngIf="announcementForm.get('title')?.errors?.['minlength']">
            Announcement Title must be at least 3 characters long.
          </div>
          <div *ngIf="announcementForm.get('title')?.errors?.['maxlength']">
            Announcement Title must not exceed 200 characters.
          </div>
          <div *ngIf="announcementForm.get('title')?.errors?.['pattern']">
            Title must start with a letter and contain only letters and spaces.
          </div>
        </div>

        <!-- Backend validation error -->
        <div *ngIf="announcementForm.get('title')?.errors?.['backend']" class="text-danger mt-1">
          {{ announcementForm.get('title')?.errors?.['backend'] }}
        </div>
      </div>
    </div>




    <!-- Content -->
    <div class="col-md-6">
      <div class="d-flex flex-column gap-1 w-100">
        <h4 class="mb-0 font-14 regular subTextColor">Content <span class="text-danger">*</span></h4>
        <input type="text" formControlName="content" class="input-field" placeholder="Enter Content" />

        <!-- Error messages -->
        <div *ngIf="announcementForm.get('content')?.touched && announcementForm.get('content')?.invalid"
          class="text-danger mt-1">
          <div *ngIf="announcementForm.get('content')?.errors?.['required']">
            Content is required.
          </div>
          <div *ngIf="announcementForm.get('content')?.errors?.['maxlength']">
            Content must not exceed 500 characters.
          </div>
        </div>
      </div>
    </div>


    <!-- Date -->
    <div class="col-md-6">
      <div class="d-flex flex-column gap-1 w-100">
        <label for="announcementDate" class="mb-0 font-14 regular subTextColor">Date <span
            class="text-danger">*</span></label>
        <input type="datetime-local" formControlName="date" id="announcementDate" class="input-field" />

        <!-- Error messages -->
        <div *ngIf="announcementForm.get('date')?.touched && announcementForm.get('date')?.invalid"
          class="text-danger mt-1">
          <div *ngIf="announcementForm.get('date')?.errors?.['required']">
            Date is required.
          </div>
        </div>
      </div>
    </div>


    <!-- Status -->
    <div class="col-md-6">
      <div class="d-flex flex-column gap-1 w-100">
        <label for="status" class="mb-0 font-14 regular subTextColor">Status <span class="text-danger">*</span></label>
        <select id="status" formControlName="status" class="input-field">
          <option value="">Select Status</option>
          <option value="DRAFT">DRAFT</option>
          <option value="PUBLISHED">PUBLISHED</option>
        </select>

        <!-- Error messages -->
        <div *ngIf="announcementForm.get('status')?.touched && announcementForm.get('status')?.invalid"
          class="text-danger mt-1">
          <div *ngIf="announcementForm.get('status')?.errors?.['required']">
            Status is required.
          </div>
        </div>
      </div>
    </div>

    <!-- Attachments -->
    <div class="col-md-6">
      <div class="d-flex flex-column gap-1 w-100">
        <h4 class="mb-0 font-14 regular subTextColor">Attachments</h4>
        <input type="file" class="input-field" (change)="onFileSelected($event)" multiple />
      </div>

      <!-- Show Selected File Names -->
      <ul class="mt-2">
        <li *ngFor="let file of selectedFiles; let i = index">
          {{ file.name }} <span class="text-danger cursor-pointer ms-2" (click)="removeAttachment(i)">Ã—</span>
        </li>
      </ul>
    </div>
  </div>

  <!-- Buttons -->
  <div class="d-flex justify-content-end gap-4">
    <button type="button" class="secondary-button py-2 scalable-p-48-24">Cancel</button>
    <button type="submit" class="primary-button py-2 scalable-p-48-24">Save</button>
  </div>
</form>